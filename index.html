<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative Data Systems</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;700&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

    <style>
        * {
            box-sizing: border-box;
        }

        :root {
            --bg-color: #0d0f0b;
            --card-bg: #0d0f0b;
            --accent-color: #559e51;
            --text-color: #bdef92;
            --border-color: #bdef92;
            --font-heading: 'Space Grotesk', sans-serif;
            --font-data: 'Space Grotesk', monospace;
        }

        body {
            background-image:
                url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E"),
                radial-gradient(circle at center, #2a3028 0%, #0d0f0b 50%, #000000 100%);
            background-color: #0d0f0b;
            background-repeat: repeat, no-repeat;
            background-size: 100px 100px, 200% 200%;
            animation: drift-gradient 15s ease-in-out infinite;
            background-attachment: fixed;
            color: var(--text-color);
            font-family: var(--font-heading);
            margin: 0;
            overflow-x: hidden;
        }

        /* --- TEXT SECTIONS (Intro/Outro) --- */
        .text-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .text-content {
            max-width: 800px;
            background: rgba(13, 15, 11, 0.8);
            border: 1px solid var(--border-color);
            padding: 40px;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .text-content h1 {
            font-size: 3rem;
            margin: 0 0 1rem 0;
            color: var(--text-color);
            text-transform: uppercase;
            line-height: 1;
        }

        .text-content h2 {
            font-size: 1.5rem;
            margin: 0 0 1.5rem 0;
            color: var(--accent-color);
            font-family: var(--font-data);
            text-transform: uppercase;
        }

        .text-content p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            color: #ddd;
        }

        .scroll-indicator {
            margin-top: 2rem;
            font-family: var(--font-data);
            font-size: 0.8rem;
            color: var(--accent-color);
            animation: bounce 2s infinite;
        }

        /* --- VIZ WRAPPER (The Tall Track) --- */
        #viz-track {
            height: 400vh;
            position: relative;
        }

        /* --- STICKY CONTAINER --- */
        .sticky-wrapper {
            position: sticky;
            top: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* --- TOP CONTAINER (CANVASES) --- */
        .viz-container {
            display: flex;
            width: 100%;
            height: 85vh;
            border-top: 5px solid var(--border-color);
            border-bottom: 5px solid var(--border-color);
            background-color: transparent;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            pointer-events: auto;
        }

        .canvas-panel {
            flex: 0 0 50%;
            max-width: 50%;
            position: relative;
            border-right: 7px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .canvas-panel:last-child {
            border-right: none;
        }

        .panel-label {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: var(--font-data);
            font-size: 0.7rem;
            text-transform: uppercase;
            background: #0d0f0b;
            color: var(--text-color);
            padding: 5px 8px;
            z-index: 10;
            border: 1px solid var(--border-color);
        }

        .data-overlay {
            position: absolute;
            bottom: 15px;
            right: 15px;
            text-align: right;
            pointer-events: none;
        }

        .data-overlay h3 {
            font-family: var(--font-data);
            font-size: 2rem;
            margin: 0;
            line-height: 1;
            color: var(--text-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
        }

        .data-overlay p {
            font-size: 0.6rem;
            text-transform: uppercase;
            color: var(--accent-color);
            margin: 0;
            background: rgba(0, 0, 0, 0.6);
            padding: 2px 5px;
        }

        /* --- BOTTOM CONTAINER (KEY) --- */
        .key-container {
            display: flex;
            width: 100%;
            border-top: 5px solid var(--border-color);
            border-bottom: 5px solid var(--border-color);
            background-color: var(--card-bg);
            margin-top: -10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            pointer-events: auto;
            position: relative;
            top: 0;
        }

        .key-panel {
            flex: 0 0 50%;
            max-width: 50%;
            padding: 15px;
            border-right: 7px solid var(--border-color);
            font-family: var(--font-data);
            font-size: 0.8rem;
            color: var(--text-color);
        }

        .key-panel:last-child {
            border-right: none;
        }

        .key-panel h3 {
            margin: 0 0 10px 0;
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--accent-color);
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }

        .key-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .color-swatch {
            display: inline-block;
            width: 10px;
            height: 10px;
            flex-shrink: 0;
        }

        .swatch-round {
            border-radius: 50%;
        }

        .swatch-line {
            height: 3px;
            width: 15px;
        }

        .plant-left-color {
            background-color: rgb(189, 239, 146);
        }

        .berry-left-color {
            background-color: rgb(60, 120, 255);
        }

        .plant-right-color {
            background-color: rgba(85, 158, 81, 0.8);
        }

        .berry-right-color {
            background-color: rgb(220, 40, 40);
        }

        /* --- TOP RIGHT CONTROLS --- */
        .top-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: #0d0f0b;
            color: var(--accent-color);
            border: 2px solid var(--border-color);
            font-family: var(--font-data);
            font-size: 0.8rem;
            padding: 8px 15px;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            transition: all 0.2s ease;
            pointer-events: auto;
        }

        .control-btn:hover {
            background: var(--accent-color);
            color: #0d0f0b;
        }

        @keyframes drift-gradient {
            0% {
                background-position: 0 0, 0% 0%;
            }

            50% {
                background-position: 0 0, 100% 100%;
            }

            100% {
                background-position: 0 0, 0% 0%;
            }
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>

<body>

    <audio id="bg-music" loop>
        <source src="Butthole Surfers - Pepper.mp3" type="audio/mpeg">
    </audio>

    <div class="top-controls">
        <button id="audio-btn" class="control-btn">UNMUTE SOUND</button>
        <button id="auto-scroll-btn" class="control-btn">START AUTO-SCROLL</button>
    </div>

    <section class="text-section" id="page-1">
        <div class="text-content">
            <h1>The Funding Gap</h1>
            <h2>Visualizing Systemic Inequity</h2>
            <p>
                In the world of Venture Capital, access to resources is not distributed equally.
                While innovation is universal, opportunity is not. This system explores the
                stark disparity in funding allocation between Black founders and the broader market.
            </p>
            <div class="scroll-indicator">SCROLL TO CONTINUE</div>
        </div>
    </section>

    <section class="text-section" id="page-2">
        <div class="text-content">
            <h2>The Mathematics of Exclusion</h2>
            <p>
                Algorithmic bias and network effects compound over time.
                A lack of initial "seed" capital prevents growth, leading to smaller networks,
                fewer "mega-rounds," and a systemic lockout from the innovation economy.
            </p>
            <p>
                Below, we use L-System fractals to visualize this data.
                The growth of the digital flora corresponds directly to capital access.
            </p>
            <div class="scroll-indicator">SCROLL TO VISUALIZE</div>
        </div>
    </section>

    <div id="viz-track">
        <div class="sticky-wrapper">

            <div class="viz-container">
                <div class="canvas-panel" id="left-sketch">
                    <div class="panel-label">ALL OTHER ENTREPRENEURS</div>
                    <div class="data-overlay">
                        <h3 id="data-left">0%</h3>
                        <p>ACCESS TO VENTURE CAPITAL</p>
                    </div>
                </div>

                <div class="canvas-panel" id="right-sketch">
                    <div class="panel-label">BLACK ENTREPRENEURS</div>
                    <div class="data-overlay">
                        <h3 id="data-right">0%</h3>
                        <p>ACCESS TO VENTURE CAPITAL</p>
                    </div>
                </div>
            </div>

            <div class="key-container">
                <div class="key-panel">
                    <h3>DATA KEY: OTHER ENTREPRENEURS</h3>
                    <div class="key-item">
                        <span class="color-swatch swatch-line plant-left-color"></span>
                        GROWTH: ~99.5% of total VC funding.
                    </div>
                    <div class="key-item">
                        <span class="color-swatch swatch-round berry-left-color"></span>
                        BLUE NODES: High deal volume.
                    </div>
                </div>
                <div class="key-panel">
                    <h3>DATA KEY: BLACK ENTREPRENEURS</h3>
                    <div class="key-item">
                        <span class="color-swatch swatch-line plant-right-color"></span>
                        GROWTH: ~0.5% of total VC funding.
                    </div>
                    <div class="key-item">
                        <span class="color-swatch swatch-round berry-right-color"></span>
                        RED NODES: Low deal volume.
                    </div>
                </div>
            </div>

        </div>
    </div>

    <section class="text-section" id="page-4">
        <div class="text-content">
            <h2>Data Sources & Methodology</h2>
            <p>
                <strong>Primary Source:</strong> Crunchbase Diversity Report 2024.<br>
                <strong>Funding Data:</strong> Total Global Venture Funding ($140B+) vs Funding Allocated to Black
                Founders (~$700M).
            </p>
            <p>
                This visualization was created to highlight the disparity not just in numbers,
                but in the potential for growth.
            </p>
            <p
                style="margin-top: 2rem; border-top: 1px solid #333; padding-top: 1rem; font-size: 0.8rem; color: var(--accent-color);">
                CREATED BY [YOUR NAME HERE]
            </p>
        </div>
    </section>

    <script>
        const audioBtn = document.getElementById('audio-btn');
        const scrollBtn = document.getElementById('auto-scroll-btn');
        const music = document.getElementById('bg-music');

        // --- VOLUME ---
        music.volume = 0.3;
        let isAudioPlaying = false;
        let isAutoScrolling = false;
        let autoScrollSpeed = 3;

        // --- AUDIO LOGIC ---
        function startAudio() {
            if (!isAudioPlaying) {
                music.play().then(() => {
                    isAudioPlaying = true;
                    audioBtn.innerText = "MUTE SOUND";
                }).catch(e => { console.log("Waiting for interaction"); });
            }
        }

        window.addEventListener('click', () => { startAudio(); }, { once: true });

        audioBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (!isAudioPlaying) {
                startAudio();
            } else {
                music.muted = !music.muted;
                audioBtn.innerText = music.muted ? "UNMUTE SOUND" : "MUTE SOUND";
            }
        });

        // --- AUTO SCROLL LOGIC ---
        scrollBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            isAutoScrolling = !isAutoScrolling;

            if (isAutoScrolling) {
                scrollBtn.innerText = "STOP AUTO-SCROLL";
                performScroll();
            } else {
                scrollBtn.innerText = "START AUTO-SCROLL";
            }
        });

        function performScroll() {
            if (isAutoScrolling) {
                window.scrollBy(0, autoScrollSpeed);
                // Stop at bottom
                if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
                    isAutoScrolling = false;
                    scrollBtn.innerText = "START AUTO-SCROLL";
                } else {
                    requestAnimationFrame(performScroll);
                }
            }
        }

        // Stop auto-scroll if user manually scrolls/clicks elsewhere
        const stopEvents = ['wheel', 'mousedown', 'touchstart', 'keydown', 'touchmove'];
        stopEvents.forEach(event => {
            window.addEventListener(event, (e) => {
                // Ignore clicks on controls
                if (e.target && e.target.closest('.top-controls')) return;

                if (isAutoScrolling) {
                    isAutoScrolling = false;
                    scrollBtn.innerText = "START AUTO-SCROLL";
                }
            }, { passive: true });
        });

        // --- SCROLL CALCULATION HELPER ---
        function getVizProgress() {
            const track = document.getElementById('viz-track');
            const rect = track.getBoundingClientRect();

            let start = 0;
            let end = track.offsetHeight - window.innerHeight;
            let current = -rect.top;

            let progress = current / end;
            return Math.max(0, Math.min(1, progress));
        }

        // ==========================================
        // SKETCH 1: ALL OTHER FOUNDERS
        // ==========================================
        const s1 = (p) => {
            let currentString = "X";
            const rules = { "X": "F+[[X]-X]-F[-FX]+X", "F": "FF" };
            const len = 6;
            const angle = 25;
            const iterations = 5;

            p.setup = () => {
                let container = document.getElementById('left-sketch');
                let c = p.createCanvas(container.clientWidth, container.offsetHeight);
                p.angleMode(p.DEGREES);
                for (let i = 0; i < iterations; i++) generate();
            };

            p.draw = () => {
                p.clear();

                let rawPercent = getVizProgress();
                let adjustedPercent = p.constrain(rawPercent * 1.5, 0, 1);
                let charsToDraw = p.floor(p.map(adjustedPercent, 0, 1, 0, currentString.length));

                document.getElementById('data-left').innerText = (adjustedPercent * 99.5).toFixed(1) + "%";

                p.resetMatrix();
                p.translate(p.width / 2, 0);
                p.rotate(180);
                p.stroke(189, 239, 146);
                p.strokeWeight(1);

                for (let i = 0; i < charsToDraw; i++) {
                    let c = currentString.charAt(i);
                    if (c === "F") {
                        p.line(0, 0, 0, -len);
                        p.translate(0, -len);
                    }
                    else if (c === "X") {
                        p.push();
                        p.noStroke();
                        p.fill(60, 120, 255);
                        p.circle(0, 0, 4);
                        p.pop();
                    }
                    else if (c === "+") p.rotate(angle);
                    else if (c === "-") p.rotate(-angle);
                    else if (c === "[") p.push();
                    else if (c === "]") p.pop();
                }
            };

            function generate() {
                let next = "";
                for (let i = 0; i < currentString.length; i++) {
                    let nextChar = rules[currentString.charAt(i)];
                    next += nextChar ? nextChar : currentString.charAt(i);
                }
                currentString = next;
            }
            p.windowResized = () => {
                let container = document.getElementById('left-sketch');
                p.resizeCanvas(container.clientWidth, container.offsetHeight);
            };
        };

        // ==========================================
        // SKETCH 2: BLACK FOUNDERS
        // ==========================================
        const s2 = (p) => {
            let currentString = "F";
            const rules = { "F": "FF+[+F-F-F]-[-F+F+F]" };
            const len = 7;
            const angle = 22;
            const iterations = 4;

            p.setup = () => {
                let container = document.getElementById('right-sketch');
                let c = p.createCanvas(container.clientWidth, container.offsetHeight);
                p.angleMode(p.DEGREES);
                for (let i = 0; i < iterations; i++) generate();
            };

            p.draw = () => {
                p.clear();

                let rawPercent = getVizProgress();
                let limit = 0.15;
                let adjustedPercent = p.constrain(rawPercent * limit, 0, limit);
                let charsToDraw = p.floor(p.map(rawPercent, 0, 1, 0, currentString.length * limit));
                let displayVal = p.map(rawPercent, 0, 1, 0, 0.5);

                document.getElementById('data-right').innerText = displayVal.toFixed(1) + "%";

                p.resetMatrix();
                p.translate(p.width / 2, 0);
                p.rotate(180);
                p.stroke(85, 158, 81, 200);
                p.strokeWeight(1.5);

                for (let i = 0; i < charsToDraw; i++) {
                    let c = currentString.charAt(i);
                    if (c === "F") {
                        p.line(0, 0, 0, -len);
                        p.translate(0, -len);
                        if (currentString.charAt(i + 1) === ']') {
                            if ((i * 12345) % 100 < 5) {
                                p.push();
                                p.noStroke();
                                p.fill(220, 40, 40);
                                p.circle(0, 0, 5);
                                p.pop();
                            }
                        }
                    } else if (c === "+") p.rotate(angle);
                    else if (c === "-") p.rotate(-angle);
                    else if (c === "[") p.push();
                    else if (c === "]") p.pop();
                }
            };

            function generate() {
                let next = "";
                for (let i = 0; i < currentString.length; i++) {
                    let nextChar = rules[currentString.charAt(i)];
                    next += nextChar ? nextChar : currentString.charAt(i);
                }
                currentString = next;
            }
            p.windowResized = () => {
                let container = document.getElementById('right-sketch');
                p.resizeCanvas(container.clientWidth, container.offsetHeight);
            };
        };

        new p5(s1, 'left-sketch');
        new p5(s2, 'right-sketch');

    </script>
</body>

</html>